const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CSh6C4Ty.js","assets/index-BVZu7NBY.css"])))=>i.map(i=>d[i]);
import{r as n,a6 as y,_ as p,j as e,b as h,i as b,W as w,x as v}from"./index-CSh6C4Ty.js";import{T as N}from"./tag-DC2IvyNO.js";const k=()=>{const[c,o]=n.useState([]),[u,d]=n.useState(!0),[l,f]=n.useState(null),x=y();n.useEffect(()=>{g()},[]);const g=async()=>{try{d(!0);const{supabase:s}=await p(async()=>{const{supabase:t}=await import("./index-CSh6C4Ty.js").then(i=>i.ae);return{supabase:t}},__vite__mapDeps([0,1])),{data:a,error:r}=await s.from("reviews").select(`
                    *,
                    product:products(name, image)
                `).order("created_at",{ascending:!1});if(r)throw r;o(a||[])}catch(s){console.error("Fetch reviews error:",s)}finally{d(!1)}},j=async s=>{if(confirm("Delete this review permanently?"))try{const{supabase:a}=await p(async()=>{const{supabase:t}=await import("./index-CSh6C4Ty.js").then(i=>i.ae);return{supabase:t}},__vite__mapDeps([0,1])),{error:r}=await a.from("reviews").delete().eq("id",s);if(r)throw r;x.success("Review deleted"),o(t=>t.filter(i=>i.id!==s))}catch{x.error("Failed to delete review")}},m=l?c.filter(s=>Math.round(s.rating)===l):c;return e.jsxs("div",{className:"space-y-8 pb-24 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-h1",children:"Reviews & Ratings"}),e.jsx("p",{className:"admin-subtitle",children:"Monitor and manage customer feedback."})]}),e.jsx("div",{className:"flex gap-2",children:[5,4,3,2,1].map(s=>e.jsxs("button",{onClick:()=>f(l===s?null:s),className:`px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-wider border flex items-center gap-1 transition-all ${l===s?"bg-yellow-400 text-black border-yellow-400":"bg-white text-gray-400 border-gray-200 hover:border-yellow-400"}`,children:[s," ",e.jsx(h,{size:10,className:"fill-current"})]},s))})]}),e.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-gray-100 overflow-hidden min-h-[400px]",children:u?e.jsx("div",{className:"flex items-center justify-center h-[400px]",children:e.jsx(b,{className:"w-8 h-8 animate-spin text-fario-purple"})}):m.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[400px] text-gray-400",children:[e.jsx(w,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{className:"font-bold",children:"No reviews found"})]}):e.jsx("div",{className:"grid grid-cols-1 divide-y divide-gray-50",children:m.map(s=>{var a;return e.jsx("div",{className:"p-6 md:p-8 hover:bg-gray-50/50 transition-colors group",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl overflow-hidden shrink-0 border border-gray-200",children:(a=s.product)!=null&&a.image?e.jsx("img",{src:s.product.image,className:"w-full h-full object-contain mix-blend-multiply"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:e.jsx(N,{size:20})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-sm mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500 font-bold uppercase tracking-wide",children:[e.jsx("span",{className:"flex text-yellow-400",children:[...Array(5)].map((r,t)=>e.jsx(h,{size:10,className:t<s.rating?"fill-current":"text-gray-200 fill-gray-200"},t))}),e.jsxs("span",{children:["• ",s.user_name]}),e.jsxs("span",{children:["• ",new Date(s.created_at).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:()=>j(s.id),className:"p-2 text-gray-300 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(v,{size:16})})]}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed max-w-3xl",children:['"',s.comment,'"']}),s.product&&e.jsx("div",{className:"mt-3 flex items-center gap-2 text-[10px] font-bold text-fario-purple uppercase tracking-wider",children:e.jsxs("span",{children:["Product: ",s.product.name]})})]})]})},s.id)})})})]})};export{k as default};
