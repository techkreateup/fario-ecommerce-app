import{j as e}from"./framer-ClpLoJbl.js";import{r as o}from"./vendor-CSLgDR2_.js";import{s as c}from"./index-rOa9hfUT.js";import"./icons-D8yHJv9q.js";import"./supabase-CDGuCRB-.js";function j(){const[t,d]=o.useState([]),[n,a]=o.useState(null),[i,u]=o.useState(!0);o.useEffect(()=>{l()},[]);const l=async()=>{console.log("üîç Fetching coupons...");try{const{data:r,error:s}=await c.from("coupons").select("*");console.log("üìä Data:",r),console.log("‚ùå Error:",s),s?(a(s.message),console.error("Supabase error:",s)):(d(r||[]),console.log("‚úÖ Coupons loaded:",r==null?void 0:r.length))}catch(r){console.error("Catch error:",r),a(r.message)}finally{u(!1)}},p=async()=>{console.log("Creating test coupon...");try{const{data:r,error:s}=await c.from("coupons").insert({code:"TEST"+Date.now(),discounttype:"percentage",discountvalue:10,minordervalue:500,isactive:!0,usedcount:0}).select();console.log("Insert result:",{data:r,error:s}),s?alert("Error: "+s.message):(alert("‚úÖ Coupon created!"),l())}catch(r){console.error("Error:",r),alert("Error: "+r.message)}};return i?e.jsx("div",{className:"p-8",children:"Loading..."}):e.jsxs("div",{className:"p-8 font-sans",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Coupons Debug Page"}),n&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[e.jsx("strong",{children:"Error:"})," ",n]}),e.jsx("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded mb-4 hover:bg-blue-600",children:"Create Test Coupon"}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded mb-4",children:[e.jsx("strong",{children:"Coupons Count:"})," ",t.length]}),t.length===0?e.jsx("p",{children:"No coupons found. Try creating one!"}):e.jsxs("table",{className:"w-full border collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-left",children:[e.jsx("th",{className:"border p-2",children:"Code"}),e.jsx("th",{className:"border p-2",children:"Type"}),e.jsx("th",{className:"border p-2",children:"Value"}),e.jsx("th",{className:"border p-2",children:"Active"})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2",children:r.code}),e.jsx("td",{className:"border p-2",children:r.discounttype}),e.jsx("td",{className:"border p-2",children:r.discountvalue}),e.jsx("td",{className:"border p-2",children:r.isactive?"‚úÖ":"‚ùå"})]},r.id))})]}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:"Check browser console (F12) for detailed logs"})]})}export{j as default};
