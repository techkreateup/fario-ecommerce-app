import{m as b,j as e,A as f}from"./framer-ClpLoJbl.js";import{r as l}from"./vendor-CSLgDR2_.js";import{a as $,o as M}from"./index-Doeg8sRI.js";import{aA as F,K as j,C as p,i as U,aC as q,b as v,aD as E,R as y,X as V,z as N,p as _,r as w,ah as G,e as Q,aE as B,a7 as K}from"./icons-D8yHJv9q.js";import"./supabase-CDGuCRB-.js";const se=()=>{const{orders:i,purgeOrder:C,updateOrderStatus:k}=$(),[r,S]=l.useState("All"),[o,R]=l.useState(""),[z,u]=l.useState(null),[d,x]=l.useState(!1),[W,X]=l.useState(!1),D=["All","Processing","Shipped","Out for Delivery","Delivered","Returns"],h={Processing:{label:"Processing",color:"text-blue-600",bg:"bg-blue-50",icon:w},Shipped:{label:"Shipped",color:"text-indigo-600",bg:"bg-indigo-50",icon:_},"Out for Delivery":{label:"In Transit",color:"text-amber-600",bg:"bg-amber-50",icon:N},Delivered:{label:"Delivered",color:"text-emerald-600",bg:"bg-emerald-50",icon:p},Cancelled:{label:"Cancelled",color:"text-slate-500",bg:"bg-slate-100",icon:V},"Return Requested":{label:"Return Req",color:"text-rose-600",bg:"bg-rose-50",icon:y},Returned:{label:"Returned",color:"text-rose-800",bg:"bg-rose-100",icon:y}},m=l.useMemo(()=>i.filter(s=>{var a;const t=((a=s.shippingAddress)==null?void 0:a.fullName)||"Guest";return s.id.toLowerCase().includes(o.toLowerCase())||t.toLowerCase().includes(o.toLowerCase())||(s.shippingaddress||"").includes(o)?r==="All"?!0:r==="Returns"?s.status==="Return Requested"||s.status==="Returned":s.status===r:!1}),[i,r,o]),P=l.useMemo(()=>{const s=i.filter(a=>a.status!=="Cancelled"&&a.status!=="Returned").reduce((a,c)=>a+c.total,0),t=i.filter(a=>a.status==="Processing").length,n=i.filter(a=>a.status==="Delivered").length;return[{label:"Total Volume",value:`₹${(s/1e3).toFixed(1)}k`,icon:F,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Pending Dispatch",value:t,icon:j,color:"text-blue-600",bg:"bg-blue-50"},{label:"Completed",value:n,icon:p,color:"text-indigo-600",bg:"bg-indigo-50"}]},[i]),O=async(s,t)=>{u(s);try{await k(s,t),await M.updateOrderStatus(s,t)}catch(n){console.error("Update failed",n)}finally{u(null)}},A=s=>{confirm("Permanently delete this order record? This cannot be undone.")&&C(s)},I=b.div,L=b.tr;return e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-end gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-fario-purple shadow-[0_0_12px_#7a51a0] animate-pulse"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-fario-purple italic",children:"Logistics Control"})]}),e.jsx("h1",{className:"text-4xl font-black font-heading italic tracking-tighter text-slate-900 leading-none",children:"Order Management"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium mt-2",children:"Monitor shipment lifecycles and update delivery protocols."})]}),e.jsx("div",{className:"flex flex-wrap gap-4 w-full xl:w-auto",children:P.map((s,t)=>e.jsxs("div",{className:"flex-1 min-w-[140px] bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s.bg} ${s.color}`,children:e.jsx(s.icon,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:s.label}),e.jsx("p",{className:"text-xl font-black text-slate-900 leading-none mt-1",children:s.value})]})]},t))})]}),e.jsx("div",{className:"bg-white rounded-[2rem] p-3 shadow-sm border border-gray-100 sticky top-24 z-30",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(U,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search Order ID, Customer, Zip...",value:o,onChange:s=>R(s.target.value),className:"w-full pl-14 pr-6 py-4 bg-gray-50 border-none rounded-2xl text-sm font-bold outline-none focus:ring-2 focus:ring-fario-purple/10 transition-all placeholder:text-gray-400 h-full"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative z-50",children:[e.jsxs("button",{onClick:()=>x(!d),className:"flex items-center justify-between gap-4 px-6 py-4 bg-gray-50 border border-transparent hover:border-gray-200 rounded-2xl text-[10px] font-black uppercase tracking-widest text-slate-700 hover:bg-white hover:shadow-md transition-all min-w-[200px] h-full",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(q,{size:14,className:"text-fario-purple"}),e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{children:r})]}),e.jsx(v,{size:14,className:`text-gray-400 transition-transform duration-300 ${d?"rotate-180":""}`})]}),e.jsx(f,{children:d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>x(!1)}),e.jsx(I,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full right-0 mt-2 w-full min-w-[220px] bg-white border border-gray-100 rounded-2xl shadow-xl overflow-hidden p-2 z-50",children:D.map(s=>e.jsxs("button",{onClick:()=>{S(s),x(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all mb-1 flex items-center justify-between group ${r===s?"bg-fario-purple text-white shadow-md":"text-slate-500 hover:bg-gray-50"}`,children:[s,r===s&&e.jsx(p,{size:14})]},s))})]})})]}),e.jsx("button",{className:"h-full aspect-square flex items-center justify-center bg-gray-50 text-gray-400 rounded-2xl hover:text-slate-900 hover:bg-white hover:shadow-md border border-transparent hover:border-gray-100 transition-all",title:"Export CSV",children:e.jsx(E,{size:20})})]})]})}),e.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-gray-100 overflow-hidden min-h-[500px]",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 text-[10px] font-black uppercase tracking-[0.2em] text-gray-400 border-b border-gray-100",children:[e.jsx("th",{className:"px-8 py-6",children:"Manifest ID"}),e.jsx("th",{className:"px-6 py-6",children:"Identity"}),e.jsx("th",{className:"px-6 py-6",children:"Value"}),e.jsx("th",{className:"px-6 py-6",children:"Status Protocol"}),e.jsx("th",{className:"px-8 py-6 text-right",children:"Controls"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:e.jsx(f,{children:m.map(s=>{var a,c,g;const t=h[s.status]||h.Processing,n=z===s.id;return e.jsxs(L,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"group hover:bg-gray-50/30 transition-colors",children:[e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center border border-gray-100 group-hover:border-fario-purple/20 transition-colors",children:e.jsx(G,{size:20,className:"text-gray-300 group-hover:text-fario-purple"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-slate-900 text-sm",children:["#",s.id]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(w,{size:10,className:"text-gray-400"}),e.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:s.date})]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-slate-900",children:((a=s.shippingAddress)==null?void 0:a.fullName)||s.useremail||"Guest User"}),e.jsxs("span",{className:"text-[10px] font-bold text-gray-400 flex items-center gap-1 mt-0.5",children:[e.jsx(N,{size:10})," ",((c=s.shippingAddress)==null?void 0:c.city)||"Unknown",", ",((g=s.shippingAddress)==null?void 0:g.zipCode)||"-"]})]})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsxs("span",{className:"text-sm font-black text-slate-900 italic",children:["₹",s.total.toLocaleString()]}),e.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase mt-0.5",children:[s.items.length," Units"]})]}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"relative",children:n?e.jsxs("div",{className:"flex items-center gap-2 text-fario-purple px-3 py-2 bg-fario-purple/5 rounded-xl w-max border border-fario-purple/10",children:[e.jsx(Q,{size:14,className:"animate-spin"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Syncing..."})]}):e.jsxs("div",{className:"relative group/status inline-block",children:[e.jsxs("select",{value:s.status,onChange:T=>O(s.id,T.target.value),className:`appearance-none pl-10 pr-10 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest border-2 cursor-pointer outline-none transition-all hover:shadow-lg hover:scale-105 ${t.bg} ${t.color} border-transparent hover:border-current`,children:[e.jsx("option",{value:"Processing",children:"Processing"}),e.jsx("option",{value:"Shipped",children:"Shipped"}),e.jsx("option",{value:"Out for Delivery",children:"In Transit"}),e.jsx("option",{value:"Delivered",children:"Delivered"}),e.jsx("option",{value:"Return Requested",children:"Return Req"}),e.jsx("option",{value:"Returned",children:"Returned"}),e.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),e.jsx("div",{className:`absolute left-3.5 top-1/2 -translate-y-1/2 pointer-events-none ${t.color}`,children:e.jsx(t.icon,{size:14})}),e.jsx("div",{className:`absolute right-3.5 top-1/2 -translate-y-1/2 pointer-events-none ${t.color}`,children:e.jsx(v,{size:12,strokeWidth:3})})]})})}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-2.5 rounded-xl text-gray-400 hover:text-slate-900 hover:bg-gray-100 transition-all border border-transparent hover:border-gray-200",title:"Print Invoice",children:e.jsx(B,{size:16})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2.5 rounded-xl text-gray-400 hover:text-rose-600 hover:bg-rose-50 transition-all border border-transparent hover:border-rose-100",title:"Delete Record",children:e.jsx(K,{size:16})})]})})]},s.id)})})})]}),m.length===0&&e.jsxs("div",{className:"py-32 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(j,{size:40,className:"text-gray-300"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 uppercase italic",children:"No Orders Found"}),e.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-2",children:"Adjust your filters or wait for new data."})]})]})})]})};export{se as default};
