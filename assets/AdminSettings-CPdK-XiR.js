const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DKB_S4Z2.js","assets/framer-BWStCgjR.js","assets/vendor-CSLgDR2_.js","assets/icons-D8yHJv9q.js","assets/supabase-CDGuCRB-.js","assets/index-BiikGBEB.css"])))=>i.map(i=>d[i]);
import{_}from"./index-DKB_S4Z2.js";import{j as e,A as T,m as I}from"./framer-BWStCgjR.js";import{r as c}from"./vendor-CSLgDR2_.js";import{i as M,G,N as Z,az as D,p as R,a6 as $,o as V,L as B,_ as H,at as J,aJ as Q,aA as W,f as q,C as Y,a as X,n as ee}from"./icons-D8yHJv9q.js";import"./supabase-CDGuCRB-.js";const b={storeName:"Fario India",supportEmail:"support@fario.in",storeAddress:"123 Commerce St, Mumbai, MH",timeZone:"Asia/Kolkata",logoUrl:"",stripeEnabled:!0,stripeKey:"pk_live_...x92",paypalEnabled:!1,paypalClientId:"",testMode:!1,flatRateShipping:150,freeShippingThreshold:2e3,taxRate:18,taxIncluded:!0,notifyOrderEmail:!0,notifyLowStockEmail:!0,notifyOrderSMS:!1,masterKey:"sk_live_...x92"},se=[],ce=()=>{const[i,r]=c.useState("general"),[t,m]=c.useState(b),[j,S]=c.useState(null),[z,ae]=c.useState(se),[O,L]=c.useState(""),[w,E]=c.useState(!1),[le,K]=c.useState(!0),[C,k]=c.useState(!1),[y,A]=c.useState(null);c.useEffect(()=>{(async()=>{try{const{supabase:h}=await _(async()=>{const{supabase:v}=await import("./index-DKB_S4Z2.js").then(U=>U.c);return{supabase:v}},__vite__mapDeps([0,1,2,3,4,5])),{data:a,error:l}=await h.from("settings").select("*").limit(1).single();if(l)throw l;a&&(S(a.id),m({storeName:a.store_name??b.storeName,supportEmail:a.support_email??b.supportEmail,storeAddress:a.store_address??b.storeAddress,timeZone:a.time_zone??b.timeZone,logoUrl:a.logo_url??"",stripeEnabled:a.stripe_enabled??!0,stripeKey:a.stripe_key??"",paypalEnabled:a.paypal_enabled??!1,paypalClientId:a.paypal_client_id??"",testMode:a.test_mode??!1,flatRateShipping:a.flat_rate_shipping??150,freeShippingThreshold:a.free_shipping_threshold??2e3,taxRate:a.tax_rate??18,taxIncluded:a.tax_included??!0,notifyOrderEmail:a.notify_order_email??!0,notifyLowStockEmail:a.notify_low_stock_email??!0,notifyOrderSMS:a.notify_order_sms??!1,masterKey:a.master_key??""}))}catch(h){console.error("Failed to load settings:",h),N("Failed to load settings from server.","error")}finally{K(!1)}})();let d,o;return(async()=>{const{supabase:h}=await _(async()=>{const{supabase:a}=await import("./index-DKB_S4Z2.js").then(l=>l.c);return{supabase:a}},__vite__mapDeps([0,1,2,3,4,5]));o=h,d=h.channel("settings_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"settings"},a=>{const l=a.new;l&&(m(v=>({...v,storeName:l.store_name,supportEmail:l.support_email,storeAddress:l.store_address,timeZone:l.time_zone,logoUrl:l.logo_url||"",stripeEnabled:l.stripe_enabled,stripeKey:l.stripe_key||"",paypalEnabled:l.paypal_enabled,paypalClientId:l.paypal_client_id||"",testMode:l.test_mode,flatRateShipping:l.flat_rate_shipping,freeShippingThreshold:l.free_shipping_threshold,taxRate:l.tax_rate,taxIncluded:l.tax_included,notifyOrderEmail:l.notify_order_email,notifyLowStockEmail:l.notify_low_stock_email,notifyOrderSMS:l.notify_order_sms,masterKey:l.master_key||""})),N("Settings updated from another session.","success"))}).subscribe()})(),()=>{d&&o&&o.removeChannel(d)}},[]);const n=(s,d)=>{m(o=>({...o,[s]:d})),k(!0)},F=async()=>{E(!0);try{const{supabase:s}=await _(async()=>{const{supabase:o}=await import("./index-DKB_S4Z2.js").then(u=>u.c);return{supabase:o}},__vite__mapDeps([0,1,2,3,4,5])),d={store_name:t.storeName,support_email:t.supportEmail,store_address:t.storeAddress,time_zone:t.timeZone,logo_url:t.logoUrl,stripe_enabled:t.stripeEnabled,stripe_key:t.stripeKey,paypal_enabled:t.paypalEnabled,paypal_client_id:t.paypalClientId,test_mode:t.testMode,flat_rate_shipping:t.flatRateShipping,free_shipping_threshold:t.freeShippingThreshold,tax_rate:t.taxRate,tax_included:t.taxIncluded,notify_order_email:t.notifyOrderEmail,notify_low_stock_email:t.notifyLowStockEmail,notify_order_sms:t.notifyOrderSMS,master_key:t.masterKey};if(j){const{error:o}=await s.from("settings").update(d).eq("id",j);if(o)throw o}else{const{data:o,error:u}=await s.from("settings").insert(d).select().single();if(u)throw u;o&&S(o.id)}k(!1),N("Settings saved successfully.")}catch(s){console.error("Failed to save settings:",s),N("Failed to save settings.","error")}finally{E(!1)}},N=(s,d="success")=>{A({msg:s,type:d}),setTimeout(()=>A(null),3e3)};return e.jsxs("div",{className:"min-h-screen bg-[#f8fafc] font-sans text-slate-900 flex",children:[e.jsxs("aside",{className:"w-64 bg-white border-r border-slate-200 flex-shrink-0 flex flex-col fixed top-0 bottom-0 z-50",children:[e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:14,className:"absolute left-3 top-2.5 text-slate-400"}),e.jsx("input",{placeholder:"Universal search...",className:"w-full bg-slate-50 border border-slate-200 rounded-md py-2 pl-9 text-xs font-medium focus:outline-none focus:border-[#7a51a0] transition-colors"})]})}),e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#7a51a0] text-white flex items-center justify-center font-bold text-sm shadow-sm",children:"AS"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Akash Sundar"}),e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Master Admin"})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[{id:"general",label:"General",icon:G},{id:"payment",label:"Payments",icon:Z},{id:"team",label:"Team & Roles",icon:D},{id:"shipping",label:"Shipping & Tax",icon:R},{id:"notifications",label:"Notifications",icon:$},{id:"security",label:"Security",icon:V}].map(s=>e.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-md transition-colors ${i===s.id?"bg-slate-50 text-[#7a51a0] ring-1 ring-slate-200":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),e.jsx("div",{className:"p-4 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500 hover:text-red-600 cursor-pointer transition-colors",children:[e.jsx(B,{size:14})," Sign Out"]})})]}),e.jsxs("main",{className:"flex-1 ml-64 min-w-0 bg-[#f8fafc]",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40 px-8 py-4 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Settings"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{placeholder:"Search settings...",value:O,onChange:s=>L(s.target.value),className:"pl-9 pr-4 py-1.5 bg-slate-100 border-transparent rounded-md text-sm focus:bg-white focus:border-[#7a51a0] focus:ring-0 transition-all w-64"})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6 border-right border-slate-200 pr-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 leading-tight",children:"Active Users"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 leading-tight",children:"24"})]}),e.jsx("div",{className:"w-px h-8 bg-slate-200"}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 leading-tight",children:"Today's Orders"}),e.jsx("p",{className:"text-lg font-bold text-slate-900 leading-tight",children:"12"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-100 rounded-md transition-colors",children:"Discard"}),e.jsxs("button",{onClick:F,disabled:w||!C,className:`px-5 py-2 rounded-md text-sm font-bold shadow-sm flex items-center gap-2 transition-all ${C?"bg-[#7a51a0] hover:bg-[#694389] text-white":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[w?e.jsx(H,{size:16,className:"animate-spin"}):e.jsx(J,{size:16}),"Save Changes"]})]})]})]}),e.jsx("div",{className:"p-8 max-w-5xl mx-auto",children:e.jsx(T,{mode:"wait",children:e.jsxs(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-6",children:[i==="general"&&e.jsx(f,{title:"Store Information",desc:"Configure your basic store details.",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(x,{label:"Store Name",children:e.jsx(p,{value:t.storeName,onChange:s=>n("storeName",s)})}),e.jsx(x,{label:"Support Email",children:e.jsx(p,{value:t.supportEmail,onChange:s=>n("supportEmail",s),type:"email"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(x,{label:"Store Address",children:e.jsx(p,{value:t.storeAddress,onChange:s=>n("storeAddress",s)})})}),e.jsx(x,{label:"Time Zone",children:e.jsxs(te,{value:t.timeZone,onChange:s=>n("timeZone",s),children:[e.jsx("option",{children:"Asia/Kolkata"}),e.jsx("option",{children:"America/New_York"}),e.jsx("option",{children:"Europe/London"})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Store Logo"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-8 flex flex-col items-center justify-center text-slate-500 hover:bg-slate-50 transition-colors cursor-pointer",children:[e.jsx(Q,{size:24,className:"mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Click to upload or drag and drop"}),e.jsx("span",{className:"text-xs",children:"SVG, PNG, JPG (max 2MB)"})]})]})]})}),i==="payment"&&e.jsx(e.Fragment,{children:e.jsx(f,{title:"Payment Gateways",desc:"Manage active payment providers.",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#635BFF] text-white rounded flex items-center justify-center font-bold text-xs",children:"Stripe"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:"Stripe"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Credit Card, Apple Pay, Google Pay"})]})]}),e.jsx(g,{checked:t.stripeEnabled,onChange:s=>n("stripeEnabled",s)})]}),t.stripeEnabled&&e.jsx("div",{className:"ml-14 space-y-3",children:e.jsx(x,{label:"Publishable Key",children:e.jsx(p,{value:t.stripeKey,onChange:s=>n("stripeKey",s),className:"font-mono text-xs"})})}),e.jsxs("div",{className:"flex items-start justify-between p-4 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#003087] text-white rounded flex items-center justify-center font-bold text-xs",children:"PayPal"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900",children:"PayPal"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PayPal Wallet, Venmo"})]})]}),e.jsx(g,{checked:t.paypalEnabled,onChange:s=>n("paypalEnabled",s)})]})]})})}),i==="team"&&e.jsxs(f,{title:"Team Members",desc:"Manage access and permissions.",children:[e.jsx("div",{className:"overflow-hidden border border-slate-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 bg-white",children:z.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-600",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-900",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:s.role}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${s.status==="Active"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsx("button",{className:"text-[#7a51a0] font-bold hover:underline",children:"Edit"})})]},s.id))})]})}),e.jsx("button",{className:"mt-4 text-sm font-bold text-[#7a51a0] flex items-center gap-2 hover:bg-slate-50 px-3 py-2 rounded-lg transition-colors",children:"+ Add Team Member"})]}),i==="shipping"&&e.jsx(f,{title:"Shipping & Tax Rules",desc:"Configure regional rates.",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(R,{size:16})," Shipping"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Flat Rate Shipping Cost",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"₹"}),e.jsx(p,{type:"number",className:"pl-8",value:t.flatRateShipping,onChange:s=>n("flatRateShipping",parseFloat(s))})]})}),e.jsx(x,{label:"Free Shipping Threshold",children:e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 font-bold",children:"₹"}),e.jsx(p,{type:"number",className:"pl-8",value:t.freeShippingThreshold,onChange:s=>n("freeShippingThreshold",parseFloat(s))})]})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(W,{size:16})," Taxes"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{label:"Standard Tax Rate (%)",children:e.jsx(p,{type:"number",value:t.taxRate,onChange:s=>n("taxRate",parseFloat(s))})}),e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"All prices include tax"}),e.jsx(g,{checked:t.taxIncluded,onChange:s=>n("taxIncluded",s)})]})]})]})]})}),i==="notifications"&&e.jsx(f,{title:"Notification Preferences",desc:"Select how you want to be alerted.",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-100 pb-2 text-xs font-bold text-slate-400 uppercase",children:[e.jsx("div",{className:"col-span-8",children:"Event"}),e.jsx("div",{className:"col-span-2 text-center",children:"Email"}),e.jsx("div",{className:"col-span-2 text-center",children:"SMS"})]}),e.jsx(P,{label:"New Order Received",email:t.notifyOrderEmail,sms:t.notifyOrderSMS,onEmail:s=>n("notifyOrderEmail",s),onSMS:s=>n("notifyOrderSMS",s)}),e.jsx(P,{label:"Low Stock Warning",email:t.notifyLowStockEmail,sms:!1,onEmail:s=>n("notifyLowStockEmail",s),onSMS:()=>{}})]})}),i==="security"&&e.jsx(f,{title:"API Access",desc:"Manage developer keys.",children:e.jsx(x,{label:"Master API Key",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(p,{value:t.masterKey,disabled:!0,className:"bg-slate-50 text-slate-500 font-mono pr-10"}),e.jsx(q,{className:"absolute right-3 top-2.5 text-slate-400",size:14})]}),e.jsx("button",{className:"px-4 border border-slate-300 rounded-lg text-sm font-bold hover:bg-slate-50 transition-colors",children:"Reveal"})]})})})]},i)})})]}),e.jsx(T,{children:y&&e.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`fixed bottom-6 right-6 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50 text-white font-medium ${y.type==="error"?"bg-red-500":"bg-[#7a51a0]"}`,children:[y.type==="success"?e.jsx(Y,{size:18}):e.jsx(X,{size:18}),y.msg]})})]})},f=({title:i,desc:r,children:t})=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden mb-6",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:i}),r&&e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r})]}),e.jsx("div",{className:"p-6",children:t})]}),x=({label:i,children:r})=>e.jsxs("div",{className:"mb-1",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:i}),r]}),p=({className:i,...r})=>e.jsx("input",{...r,className:`w-full rounded-lg border-slate-300 shadow-sm focus:border-[#7a51a0] focus:ring-[#7a51a0] text-sm py-2.5 px-3 border transition-all ${i}`}),te=({children:i,onChange:r,value:t})=>e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:t,onChange:m=>r(m.target.value),className:"appearance-none w-full rounded-lg border-slate-300 shadow-sm focus:border-[#7a51a0] focus:ring-[#7a51a0] text-sm py-2.5 px-3 border bg-white",children:i}),e.jsx(ee,{className:"absolute right-3 top-3 text-slate-400 rotate-90",size:16})]}),g=({checked:i,onChange:r})=>e.jsx("button",{onClick:()=>r(!i),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#7a51a0] ${i?"bg-[#7a51a0]":"bg-slate-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition duration-200 shadow-sm ${i?"translate-x-6":"translate-x-1"}`})}),P=({label:i,email:r,sms:t,onEmail:m,onSMS:j})=>e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center py-2",children:[e.jsx("div",{className:"col-span-8 text-sm font-medium text-slate-900",children:i}),e.jsx("div",{className:"col-span-2 flex justify-center",children:e.jsx(g,{checked:r,onChange:m})}),e.jsx("div",{className:"col-span-2 flex justify-center",children:e.jsx(g,{checked:t,onChange:j})})]});export{ce as default};
